# Stage 10.1: Design Authenticity Check (Pre-Generation UI/UX Validation)

## AGENT-NATIVE EXECUTION
You are Claude executing Stage 10.1 for a SPECIFIC IDEA PACK. Validate that UI/UX design contracts are domain-authentic and implementable before app generation.

## BUILD MODE VERIFICATION (CRITICAL)
Stage 10.1 can ONLY be executed via `build <IDEA_ID_OR_NAME>` command:
- Verify invocation came from build mode, not `run app factory`
- Require Stage 09.5 (Runtime Sanity) passed (hard-fail if missing)
- Assert this stage is building ONE SPECIFIC IDEA only
- Hard-fail if executed during batch idea generation

## PURPOSE (MANDATORY GATE)
This stage prevents Stage 10 from generating generic or domain-inappropriate user interfaces.

**VALIDATION TARGETS**:
- UI/UX design contract authenticity and domain-appropriateness
- Design archetype consistency across all planned screens
- Component inventory completeness for app functionality
- Visual design system coherence and accessibility compliance
- Design-to-development implementation feasibility

## INPUTS
- Read: `runs/.../ideas/<idea_dir>/uiux/uiux_prompt.md` (binding design contract)
- Read: `runs/.../ideas/<idea_dir>/uiux/design_tokens.json` (color/typography system)
- Read: `runs/.../ideas/<idea_dir>/uiux/component_inventory.md` (required UI components)
- Read: `runs/.../ideas/<idea_dir>/uiux/interaction_expectations.md` (behavior specifications)
- Read: `runs/.../ideas/<idea_dir>/stages/stage03.json` (UX design)
- Read: `runs/.../ideas/<idea_dir>/stages/stage08.json` (brand identity)
- Read: `runs/.../ideas/<idea_dir>/meta/idea.json` (canonical idea definition)

## OUTPUTS
- Write: `runs/.../ideas/<idea_dir>/stages/stage10.1.json` (design authenticity validation)
- Write: `runs/.../ideas/<idea_dir>/outputs/stage10.1_execution.md` (execution log)
- Write: `runs/.../ideas/<idea_dir>/design/authenticity_report.md` (domain alignment analysis)
- Write: `runs/.../ideas/<idea_dir>/design/implementation_plan.json` (component-to-code mapping)
- Write: `runs/.../ideas/<idea_dir>/design/visual_consistency_check.json` (archetype validation)
- Update: `runs/.../ideas/<idea_dir>/meta/stage_status.json` (progress tracking)

## DESIGN AUTHENTICITY VALIDATION (MANDATORY)

### Domain-Appropriate Visual Language Analysis
Validate design archetype matches app domain and user context:

**PARANORMAL/INVESTIGATION APPS**:
- **Required Archetype**: "Forensic Instrument Panel" or "Scientific Analysis Console"
- **Visual Elements**: Dark themes, equipment-inspired UI, data visualization components
- **Forbidden Elements**: Bright colors, casual typography, entertainment-focused aesthetics
- **Component Requirements**: Waveform displays, meters, status indicators, evidence logging

**PRODUCTIVITY/TASK MANAGEMENT APPS**:
- **Required Archetype**: "Professional Dashboard" or "Focused Workspace"
- **Visual Elements**: Clean layouts, progress visualization, achievement systems
- **Forbidden Elements**: Distracting animations, entertainment gamification, cluttered interfaces
- **Component Requirements**: Progress bars, task lists, calendar integrations, metrics displays

**HEALTH/FITNESS APPS**:
- **Required Archetype**: "Wellness Monitor" or "Performance Tracker"
- **Visual Elements**: Biometric displays, trend visualization, motivational elements
- **Forbidden Elements**: Medical device aesthetics, overly clinical appearance
- **Component Requirements**: Charts, goal rings, streaks, health data displays

**CREATIVE/MEDIA APPS**:
- **Required Archetype**: "Creative Studio" or "Media Workshop"
- **Visual Elements**: Flexible layouts, media galleries, tool interfaces
- **Forbidden Elements**: Rigid corporate aesthetics, overwhelming complexity
- **Component Requirements**: Media viewers, editing controls, export options, portfolio displays

### UI/UX Design Contract Completeness
Validate design contract contains all required elements for implementation:

**REQUIRED SECTIONS IN UIUX_PROMPT.MD**:
- `<role>`: Specific UI/UX generation role with domain expertise
- `<design-system>`: Complete design philosophy and visual language definition
- Screen-specific design requirements for all core user flows
- Interaction patterns and animation specifications
- Accessibility requirements and alternative interaction methods

**DESIGN TOKEN VALIDATION**:
- Color palette appropriate for app domain (dark forensic vs bright wellness)
- Typography hierarchy supports app information architecture
- Spacing system provides consistent visual rhythm
- Component variants cover all UI states (loading, error, empty, success)

**COMPONENT INVENTORY COMPLETENESS**:
- All user flows have corresponding UI components defined
- Domain-specific components identified and specified (waveforms, charts, meters)
- Navigation components align with determined architecture
- Form components support required data input patterns

### Visual Consistency & Archetype Adherence
Ensure design system maintains archetype consistency across all screens:

**CONSISTENCY VALIDATION RULES**:
- Home screen reflects chosen design archetype immediately
- All planned screens follow same visual language and component patterns
- Interactive elements use consistent feedback and transition patterns
- Information hierarchy supports user task completion efficiently

**ARCHETYPE DEVIATION DETECTION**:
- Generic "app" aesthetics that don't match domain (FORBIDDEN)
- Mixed design languages that confuse user expectations (FORBIDDEN)
- Visual elements that contradict app's professional or creative positioning
- Color choices that don't support app usage context (dark vs light environments)

### Implementation Feasibility Analysis
Validate design system can be implemented in React Native with available components:

**REACT NATIVE COMPONENT MAPPING**:
- All designed components have clear React Native implementation path
- Custom components identified and complexity assessed
- Animation requirements achievable with React Native Animated API
- Platform-specific adaptations (iOS/Android) properly specified

**ACCESSIBILITY IMPLEMENTATION**:
- Touch targets meet minimum size requirements (44pt iOS, 48dp Android)
- Color contrast ratios meet WCAG 2.1 AA standards
- Screen reader accessibility patterns properly defined
- Alternative input methods (voice, switch control) supported

## JSON SCHEMA

```json
{
  "meta": {
    "run_id": "string",
    "idea_id": "string", 
    "idea_name": "string",
    "idea_dir": "string",
    "source_root": "string",
    "input_stage_paths": ["array of files read"],
    "boundary_path": "string"
  },
  "design_authenticity": {
    "domain_alignment": {
      "app_domain": "string",
      "required_archetype": "string",
      "chosen_archetype": "string",
      "archetype_match": "authentic|generic|mismatched",
      "visual_language_score": "number"
    },
    "design_contract_validation": {
      "uiux_prompt_complete": "boolean",
      "design_tokens_valid": "boolean",
      "component_inventory_complete": "boolean",
      "interaction_patterns_defined": "boolean",
      "missing_elements": ["string"]
    },
    "visual_consistency": {
      "home_screen_authentic": "boolean",
      "cross_screen_consistency": "boolean",
      "archetype_adherence_score": "number",
      "generic_elements_detected": ["string"],
      "consistency_violations": ["string"]
    },
    "implementation_feasibility": {
      "react_native_compatibility": "boolean",
      "component_complexity_assessment": {
        "simple_components": ["string"],
        "complex_components": ["string"],
        "custom_implementation_required": ["string"]
      },
      "accessibility_compliance": "boolean",
      "platform_adaptation_requirements": ["string"]
    }
  },
  "component_mapping": {
    "core_components": [
      {
        "design_component": "string",
        "react_native_implementation": "string",
        "complexity": "simple|moderate|complex",
        "dependencies": ["string"]
      }
    ],
    "domain_specific_components": [
      {
        "component": "string",
        "purpose": "string",
        "implementation_strategy": "string",
        "complexity_assessment": "string"
      }
    ]
  },
  "gate_result": {
    "passed": "boolean",
    "confidence_score": "number",
    "blocking_issues": ["string"],
    "implementation_warnings": ["string"],
    "recommendations": ["string"]
  }
}
```

## FAILURE CONDITIONS (HARD STOP)

Stage 10.1 MUST FAIL if:

### Design Authenticity Issues
- Chosen design archetype doesn't match app domain requirements
- Visual language is generic or inappropriate for user context
- Design contract lacks domain-specific elements or requirements
- Home screen design uses generic "welcome" or placeholder patterns

### Design Contract Incompleteness
- UI/UX prompt missing critical sections (role, design-system)
- Design tokens don't provide complete implementation guidance
- Component inventory doesn't cover all required user flows
- Interaction expectations lack specific behavioral requirements

### Visual Consistency Problems
- Design system lacks coherence across planned screens
- Multiple conflicting design languages or archetypes
- Component patterns don't support consistent user experience
- Accessibility requirements not properly integrated into design

### Implementation Infeasibility
- Designed components cannot be implemented in React Native
- Animation or interaction requirements exceed platform capabilities
- Accessibility requirements conflict with designed interactions
- Platform-specific adaptations not properly planned

## BOUNDARY ENFORCEMENT
This stage must ONLY read from:
- Current idea pack: `runs/.../ideas/<idea_dir>/`
- No cross-contamination with other ideas or runs

## EXECUTION STEPS

1. **Load Design Artifacts**: Read all UI/UX design contract files and stage JSONs
2. **Analyze Domain Alignment**: Validate design archetype matches app domain appropriately
3. **Validate Design Completeness**: Ensure all required design elements are specified
4. **Check Visual Consistency**: Confirm coherent design language across all planned screens
5. **Assess Implementation Feasibility**: Map design components to React Native implementation
6. **Generate Implementation Plan**: Create specific component-to-code mapping for Stage 10
7. **Pass/Fail Decision**: Determine if design system is authentic and implementable
8. **Write Stage JSON**: Document validation results and implementation guidance

## SUCCESS CRITERIA
Stage 10.1 is complete when:
- [ ] `stage10.1.json` exists and validates against schema
- [ ] Design archetype validated as domain-appropriate and authentic
- [ ] UI/UX design contract complete with all required elements
- [ ] Visual consistency confirmed across all planned screens and components
- [ ] Implementation plan created mapping design to React Native components
- [ ] Gate result indicates design system ready for professional implementation

## HARD FAILURE CONDITIONS
- Design archetype generic or mismatched to app domain → Write `stage10.1_failure.md` and stop
- UI/UX design contract incomplete or lacking domain-specific requirements → Write `stage10.1_failure.md` and stop
- Visual consistency violations across screens or component patterns → Write `stage10.1_failure.md` and stop
- Implementation infeasible with React Native or accessibility constraints → Write `stage10.1_failure.md` and stop
- Boundary violation (reading from wrong idea pack) → Write `stage10.1_failure.md` and stop

DO NOT output JSON in chat. Write all artifacts to disk and continue with Stage 10.