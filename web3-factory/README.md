# Web3 Factory

> **‚ö†Ô∏è IN DEVELOPMENT** - Token Launch v2 compliance and social fee claimers implementation in progress

**Solana-first tokenized web app generation for Web3 builders.**

Web3 Factory is a specialized pipeline that transforms Web3 app concepts into production-ready tokenized web applications. Every app generated includes a custom Solana token that serves a functional purpose in the user experience.

## üéØ What Web3 Factory Does

Web3 Factory takes raw Web3 app ideas and builds complete, tokenized web applications that:

- **Validate Web3 necessity**: Ensures your idea actually benefits from blockchain technology
- **Create functional tokens**: Generates Solana tokens that serve real utility, not speculation  
- **Build complete web apps**: Produces production-ready Next.js or Vite + React applications
- **Integrate Solana seamlessly**: Handles wallet connection, token operations, and transaction flows
- **Route fees automatically**: Built-in 75%/25% fee split (creator/App Factory) with immutable partner attribution

## üöÄ Quick Start

**Prerequisites**: Node.js 18+, Solana wallet, Bags API key from https://dev.bags.fm

```bash
# 1. Open Claude and navigate to web3-factory directory
cd web3-factory

# 2. Generate a complete tokenized web app from any idea
web3 idea Create a decentralized marketplace where users stake tokens to list items and earn rewards for successful sales

# 3. Your tokenized app is ready
cd builds/your-app-name/
npm install
npm run dev
```

**That's it.** Your Web3 app is live with a working Solana token integration.

## üåä How It Works

Web3 Factory uses a 5-stage pipeline (W1-W5) to transform ideas into tokenized apps:

```
Raw Web3 Idea ‚Üí W1 Validation ‚Üí W2 Token Design ‚Üí W3 Architecture ‚Üí W4 Bags Config ‚Üí W5 Build & Ship
                     ‚Üì              ‚Üì              ‚Üì              ‚Üì              ‚Üì
               Web3 justified   Token role     Web app specs   SDK ready    Complete app
                                 defined                                    + Solana token
```

### W1: Web3 Idea Validation
- **Validates** that your idea meaningfully benefits from blockchain technology
- **Tests** whether a token serves a functional purpose vs. pure speculation  
- **Filters out** ideas better suited for traditional app development

### W2: Token Role Definition
- **Chooses** exactly ONE primary token role (access/usage/fee capture/settlement/governance-lite)
- **Defines** token economics, supply model, and fee routing
- **Ensures** token serves app functionality, not speculation

### W3: App Architecture (Web)
- **Selects** optimal framework (Next.js or Vite + React)
- **Designs** wallet integration strategy and Solana connection patterns
- **Plans** failure modes and performance requirements

### W4: Bags Integration
- **Configures** Bags SDK for deterministic token creation
- **Sets up** environment-based configuration (no hardcoded secrets)
- **Prepares** fee routing and token parameters

### W5: Build & Ship
- **Creates** Solana token via Bags SDK
- **Generates** complete production-ready web application
- **Integrates** token functionality into app behavior
- **Produces** deployment-ready code with documentation

## üèóÔ∏è What You Get

After running `web3 idea <YOUR_IDEA>`:

### üì± Complete Web App
- Production-ready Next.js or Vite + React application
- Responsive design for desktop and mobile
- Complete wallet connection flow (Phantom, Solflare, Backpack)
- Real-time token balance display and transaction history
- Professional UI with error handling and loading states

### ü™ô Functional Solana Token  
- Custom SPL token created specifically for your app
- Token serves real utility based on your app's purpose
- Built-in fee routing (90% creator, 10% App Factory)
- Complete metadata and deployment documentation

### üîó Seamless Integration
- Token operations wired into app functionality
- Smart contract interactions handled automatically  
- Transaction confirmation flows and error recovery
- Environment configuration for mainnet/devnet deployment

### üìö Complete Documentation
- Setup and deployment guides for major platforms
- Token integration patterns and best practices
- Troubleshooting guide for common issues
- Environment variable configuration

## üéÆ Token Roles Explained

Web3 Factory supports 5 primary token roles. Your app will use exactly ONE:

### üóùÔ∏è ACCESS Token
**Users spend tokens to unlock features or content**
- Example: Pay 10 tokens to access premium analytics dashboard
- Supply: Usually fixed or deflationary  
- Behavior: Users acquire tokens, spend for access

### ‚ö° USAGE Token
**Users consume tokens for each action or transaction**
- Example: Pay 1 token per API call or data query
- Supply: Can be inflationary with burn mechanisms
- Behavior: Users spend tokens for each use

### üí∞ FEE CAPTURE Token  
**Token holders receive fees generated by the app**
- Example: Revenue sharing with token holders based on app usage
- Supply: Usually fixed with distribution mechanisms
- Behavior: Users hold tokens to earn fees

### üè¶ SETTLEMENT Token
**All app transactions denominated in the token**
- Example: Marketplace where all trades happen in your token
- Supply: Stable supply with predictable inflation
- Behavior: Users transact using the token

### üó≥Ô∏è GOVERNANCE-LITE Token
**Token grants voting rights on simple app parameters**
- Example: Vote on fee rates or feature priorities
- Supply: Usually fixed with delegation mechanisms
- Behavior: Users hold tokens to participate in decisions

## üéØ Perfect For

### Web3 Builders
- **Decentralized marketplaces**: Stake tokens to list, earn rewards for sales
- **Token-gated communities**: Access exclusive content with token holdings
- **DeFi tools**: Fee-sharing analytics platforms and trading interfaces
- **Gaming economies**: In-game tokens for items, upgrades, and rewards

### Ideas That Benefit From Tokens
- **Shared state**: Apps requiring verifiable, shared data between users
- **Network effects**: Value increases with more onchain participants  
- **Permissionless access**: Apps benefiting from censorship resistance
- **Token incentives**: User behaviors improved by token-based rewards

## ‚ùå Not Suitable For

Web3 Factory will **reject** ideas that don't meaningfully benefit from Web3:

- Simple productivity apps better suited for traditional databases
- Consumer apps where tokens add complexity without value
- Ideas where fiat payments would serve the same purpose
- Apps requiring complex smart contracts beyond token functionality

**Web3 Factory is opinionated**: It only builds apps that genuinely benefit from blockchain technology.

## üõ†Ô∏è Technical Stack

**Frontend Frameworks**: Next.js 14+ or Vite + React 18+
**Blockchain**: Solana (mainnet/devnet support)  
**Wallet Integration**: Solana Wallet Adapter (Phantom, Solflare, Backpack)
**Token Creation**: Bags SDK integration
**Styling**: Tailwind CSS with responsive design
**Deployment**: Vercel, Netlify, or any static host

## üöÄ Deployment Options

Built apps are ready for deployment on:

- **Vercel**: One-click deployment for Next.js apps
- **Netlify**: Static hosting for Vite apps  
- **AWS/GCP**: Enterprise deployment with custom domains
- **IPFS**: Decentralized hosting for maximum censorship resistance

Complete deployment guides included with every generated app.

## üîç Example Ideas

```bash
# DeFi & Finance
web3 idea Create a yield farming aggregator where users stake governance tokens to access premium strategies and earn higher rewards

# Gaming & NFTs  
web3 idea Build a decentralized tournament platform where players stake tokens to join competitions and winners earn from the prize pool

# Social & Community
web3 idea Design a token-gated Discord alternative where community access requires holding tokens and active participation earns more tokens

# Marketplaces & Commerce
web3 idea Create a freelancer marketplace where clients stake tokens for projects and freelancers earn reputation tokens for completed work

# Data & Analytics
web3 idea Build a DeFi analytics dashboard where users pay tokens for real-time data and token holders receive fee sharing from usage
```

## üîÑ Bags Integration (Authoritative)

Web3 Factory uses the official Bags SDK for all Solana token creation operations. This section provides the complete integration specification.

### Required Environment Variables

```bash
# Bags API Configuration
BAGS_API_KEY=your_bags_api_key_here          # From https://dev.bags.fm
BAGS_ENVIRONMENT=mainnet                     # mainnet or devnet

# Solana Configuration  
SOLANA_RPC_URL=https://mainnet.helius-rpc.com/?api-key=key  # Helius recommended
SOLANA_NETWORK=mainnet-beta                  # mainnet-beta or devnet

# Creator Configuration
CREATOR_WALLET_ADDRESS=your_public_key_here  # Receives 75% of protocol fees

# App Factory Partner (Fixed - DO NOT CHANGE)
APP_FACTORY_PARTNER_KEY=FDYcVLxHkekUFz4M29hCuBH3vbf1aLm62GEFZxLFdGE7
```

### High-Level Flow

**W4 Configuration Stage**:
1. Read token model from W2 and architecture from W3
2. Generate deterministic build ID from stage outputs
3. Configure Bags SDK parameters (no token creation)
4. Validate environment requirements without accessing secrets
5. Write `bags_config.json` with all creation parameters

**W5 Build & Ship Stage**:
1. Load `bags_config.json` from W4
2. Check for existing token receipt (idempotency)
3. Initialize Bags SDK with environment variables
4. Create token via SDK with fee routing configuration
5. Write complete token receipt and metadata to disk
6. Generate web app with token integration

### Idempotency System

**Build ID Generation**:
- Deterministic SHA256 hash of W1-W4 stage outputs
- Same inputs always produce the same build ID
- Used for safe re-runs without duplicate tokens

**Receipt-Based Safety**:
```typescript
// Check existing receipt before token creation
const receiptPath = 'builds/app-name/token/token_receipt.json';
const existingReceipt = loadTokenReceipt(receiptPath);

if (existingReceipt && existingReceipt.inputHash === currentInputHash) {
  // Token already exists, skip creation safely
  return existingReceipt;
}
```

### Fee Routing Configuration

**Fixed Fee Split (Non-negotiable)**:
- **75% ‚Üí App Creator** (your wallet address)  
- **25% ‚Üí App Factory Partner** (`FDYcVLxHkekUFz4M29hCuBH3vbf1aLm62GEFZxLFdGE7`)

**Implementation**:
```json
{
  "feeRouting": {
    "creator": { "percentage": 75 },
    "partner": { 
      "key": "FDYcVLxHkekUFz4M29hCuBH3vbf1aLm62GEFZxLFdGE7", 
      "percentage": 25 
    }
  }
}
```

Fee routing is enforced via Bags SDK partner configuration and written to all token receipts for transparency.

### Generated Files & Locations

**Token Creation Artifacts** (written to `builds/<app_name>/token/`):
- `token_plan.json` - Token creation plan used for generation
- `bags_config.json` - Exact Bags SDK configuration used  
- `token_receipt.json` - Deterministic creation receipt with all details
- `token_receipt.md` - Human-readable token information

**Example Receipt Structure**:
```json
{
  "buildId": "deterministic_build_id",
  "tokenAddress": "solana_token_mint_address", 
  "transactionId": "solana_transaction_signature",
  "createdAt": "2024-01-08T12:00:00.000Z",
  "feeRouting": {
    "creator": { "address": "creator_wallet", "percentage": 75 },
    "partner": { "address": "FDYcVLxHk...", "percentage": 25 }
  },
  "bagsIntegration": {
    "sdkVersion": "@bagsfm/bags-sdk@1.x.x",
    "partnerKey": "FDYcVLxHkekUFz4M29hCuBH3vbf1aLm62GEFZxLFdGE7"
  }
}
```

### API Keys & Security

**Open-Source Safe**:
- API keys are NEVER committed to git
- All token artifacts safe for public repositories  
- Only public keys and transaction IDs stored on disk
- Environment variables required at runtime only

**Development vs Production**:
- Use devnet for testing with development API keys
- Switch to mainnet for production deployment
- Separate creator wallet addresses for each environment
- Same App Factory partner key across all environments

### Error Handling & Retries

**Automatic Retry Logic**:
- Rate limiting (1,000 requests/hour): Exponential backoff
- Network failures: 3 retries with increasing delays
- Partial failures: Detection and clear error reporting

**Failure Recovery**:
- Complete error logs written to disk for debugging
- Idempotency prevents double-spending on retries  
- Clear remediation steps provided for common issues

**References**:
- **Official Bags SDK**: https://github.com/bagsfm/bags-sdk
- **Bags API Docs**: https://docs.bags.fm/
- **Technical Implementation**: `docs/bags_implementation.md`

## üÜö Web3 Factory vs. App Factory

**Web3 Factory (this system)**:
- Solana-focused tokenized web applications
- Token-based monetization and user incentives
- Next.js/Vite + React frontend frameworks
- Validates Web3-specific value propositions
- Creates functional tokens via Bags SDK

**App Factory (sibling system)**:
- Consumer mobile applications (React Native/Expo)
- Subscription-based monetization via RevenueCat
- iOS/Android app store deployment
- Market research and user validation focus
- No blockchain or token integration

Both systems are **completely separate** and serve different use cases. Choose the system that matches your app concept.

## ü§ù Contributing

Web3 Factory welcomes contributions:

- **Report issues**: Found a bug or have a feature request?
- **Improve templates**: Enhance the W1-W5 stage templates
- **Add token roles**: Suggest new primary token role patterns
- **Documentation**: Improve setup guides and examples
- **Integration**: Add support for new wallets or frameworks

## üìÑ License

MIT License - Web3 Factory is open source and free to use.

---

**Web3 Factory: Transform Web3 ideas into tokenized reality.**
